{"ast":null,"code":"import { __assign, __awaiter, __generator } from \"tslib\";\nimport { HttpRequest } from \"@aws-sdk/protocol-http\";\nimport { getSkewCorrectedDate } from \"./utils/getSkewCorrectedDate\";\nimport { getUpdatedSystemClockOffset } from \"./utils/getUpdatedSystemClockOffset\";\nexport var awsAuthMiddleware = function (options) {\n  return function (next, context) {\n    return function (args) {\n      return __awaiter(this, void 0, void 0, function () {\n        var signer, output, _a, _b, headers, dateHeader;\n\n        var _c;\n\n        return __generator(this, function (_d) {\n          switch (_d.label) {\n            case 0:\n              if (!HttpRequest.isInstance(args.request)) return [2, next(args)];\n              return [4, options.signer()];\n\n            case 1:\n              signer = _d.sent();\n              _a = next;\n              _b = [__assign({}, args)];\n              _c = {};\n              return [4, signer.sign(args.request, {\n                signingDate: getSkewCorrectedDate(options.systemClockOffset),\n                signingRegion: context[\"signing_region\"],\n                signingService: context[\"signing_service\"]\n              })];\n\n            case 2:\n              return [4, _a.apply(void 0, [__assign.apply(void 0, _b.concat([(_c.request = _d.sent(), _c)]))]).catch(function (error) {\n                if (error.ServerTime) {\n                  options.systemClockOffset = getUpdatedSystemClockOffset(error.ServerTime, options.systemClockOffset);\n                }\n\n                throw error;\n              })];\n\n            case 3:\n              output = _d.sent();\n              headers = output.response.headers;\n              dateHeader = headers && (headers.date || headers.Date);\n\n              if (dateHeader) {\n                options.systemClockOffset = getUpdatedSystemClockOffset(dateHeader, options.systemClockOffset);\n              }\n\n              return [2, output];\n          }\n        });\n      });\n    };\n  };\n};\nexport var awsAuthMiddlewareOptions = {\n  name: \"awsAuthMiddleware\",\n  tags: [\"SIGNATURE\", \"AWSAUTH\"],\n  relation: \"after\",\n  toMiddleware: \"retryMiddleware\",\n  override: true\n};\nexport var getAwsAuthPlugin = function (options) {\n  return {\n    applyToStack: function (clientStack) {\n      clientStack.addRelativeTo(awsAuthMiddleware(options), awsAuthMiddlewareOptions);\n    }\n  };\n};\nexport var getSigV4AuthPlugin = getAwsAuthPlugin;","map":{"version":3,"sources":["C:/Users/owner/prog/make_tf_easy/frontend/node_modules/@aws-sdk/client-location/node_modules/@aws-sdk/middleware-signing/dist-es/middleware.js"],"names":["__assign","__awaiter","__generator","HttpRequest","getSkewCorrectedDate","getUpdatedSystemClockOffset","awsAuthMiddleware","options","next","context","args","signer","output","_a","_b","headers","dateHeader","_c","_d","label","isInstance","request","sent","sign","signingDate","systemClockOffset","signingRegion","signingService","apply","concat","catch","error","ServerTime","response","date","Date","awsAuthMiddlewareOptions","name","tags","relation","toMiddleware","override","getAwsAuthPlugin","applyToStack","clientStack","addRelativeTo","getSigV4AuthPlugin"],"mappings":"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","sourcesContent":["import { __assign, __awaiter, __generator } from \"tslib\";\nimport { HttpRequest } from \"@aws-sdk/protocol-http\";\nimport { getSkewCorrectedDate } from \"./utils/getSkewCorrectedDate\";\nimport { getUpdatedSystemClockOffset } from \"./utils/getUpdatedSystemClockOffset\";\nexport var awsAuthMiddleware = function (options) {\n    return function (next, context) {\n        return function (args) {\n            return __awaiter(this, void 0, void 0, function () {\n                var signer, output, _a, _b, headers, dateHeader;\n                var _c;\n                return __generator(this, function (_d) {\n                    switch (_d.label) {\n                        case 0:\n                            if (!HttpRequest.isInstance(args.request))\n                                return [2, next(args)];\n                            return [4, options.signer()];\n                        case 1:\n                            signer = _d.sent();\n                            _a = next;\n                            _b = [__assign({}, args)];\n                            _c = {};\n                            return [4, signer.sign(args.request, {\n                                    signingDate: getSkewCorrectedDate(options.systemClockOffset),\n                                    signingRegion: context[\"signing_region\"],\n                                    signingService: context[\"signing_service\"],\n                                })];\n                        case 2: return [4, _a.apply(void 0, [__assign.apply(void 0, _b.concat([(_c.request = _d.sent(), _c)]))]).catch(function (error) {\n                                if (error.ServerTime) {\n                                    options.systemClockOffset = getUpdatedSystemClockOffset(error.ServerTime, options.systemClockOffset);\n                                }\n                                throw error;\n                            })];\n                        case 3:\n                            output = _d.sent();\n                            headers = output.response.headers;\n                            dateHeader = headers && (headers.date || headers.Date);\n                            if (dateHeader) {\n                                options.systemClockOffset = getUpdatedSystemClockOffset(dateHeader, options.systemClockOffset);\n                            }\n                            return [2, output];\n                    }\n                });\n            });\n        };\n    };\n};\nexport var awsAuthMiddlewareOptions = {\n    name: \"awsAuthMiddleware\",\n    tags: [\"SIGNATURE\", \"AWSAUTH\"],\n    relation: \"after\",\n    toMiddleware: \"retryMiddleware\",\n    override: true,\n};\nexport var getAwsAuthPlugin = function (options) { return ({\n    applyToStack: function (clientStack) {\n        clientStack.addRelativeTo(awsAuthMiddleware(options), awsAuthMiddlewareOptions);\n    },\n}); };\nexport var getSigV4AuthPlugin = getAwsAuthPlugin;\n"]},"metadata":{},"sourceType":"module"}