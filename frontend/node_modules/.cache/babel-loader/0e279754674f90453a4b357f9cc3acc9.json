{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\owner\\\\prog\\\\make_tf_easy\\\\frontend\\\\src\\\\pages\\\\Login.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport Amplify, { Auth, Hub } from 'aws-amplify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nAmplify.configure({\n  Auth: {\n    region: 'ap-northeast-1',\n    userPoolId: 'ap-northeast-1_JFBzKeSlw',\n    userPoolWebClientId: '7kg7iakih0i1jlr614hp62djeq',\n    oauth: {\n      domain: 'maketfeasy.auth.ap-northeast-1.amazoncognito.com',\n      scope: ['openid'],\n      redirectSignIn: 'https://localhost:3000/',\n      redirectSignOut: 'https://localhost:3000/',\n      responseType: 'code'\n    }\n  }\n});\nexport const Login = () => {\n  _s();\n\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    Hub.listen('auth', _ref => {\n      let {\n        payload: {\n          event,\n          data\n        }\n      } = _ref;\n\n      switch (event) {\n        case 'signIn':\n        case 'cognitoHostedUI':\n          getUser().then(userData => setUser(userData));\n          break;\n\n        case 'signOut':\n          setUser(null);\n          break;\n\n        case 'signIn_failure':\n        case 'cognitoHostedUI_failure':\n          console.log('Sign in failure', data);\n          break;\n      }\n    });\n    getUser().then(userData => setUser(userData));\n  }, []);\n\n  const getUser = async () => {\n    try {\n      const userData = await Auth.currentAuthenticatedUser(); // デバッグ用\n\n      Auth.currentSession().then(data => {\n        console.log(`token: ${data.getIdToken().getJwtToken()}`);\n      });\n      console.log(userData);\n      return userData;\n    } catch (e) {\n      return console.log('Not signed in');\n    }\n  };\n\n  return user ? /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u30B5\\u30A4\\u30F3\\u30A4\\u30F3\\u6E08\\u307F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\u30E6\\u30FC\\u30B6\\u30FC\\u540D: \", user.username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => Auth.signOut(),\n      children: \"Sign Out\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u30B5\\u30A4\\u30F3\\u30A4\\u30F3\\u3059\\u308B\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => Auth.federatedSignIn(),\n      children: \"Sign In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"5s2qRsV95gTJBmaaTh11GoxYeGE=\");\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/owner/prog/make_tf_easy/frontend/src/pages/Login.tsx"],"names":["useEffect","useState","Amplify","Auth","Hub","configure","region","userPoolId","userPoolWebClientId","oauth","domain","scope","redirectSignIn","redirectSignOut","responseType","Login","user","setUser","listen","payload","event","data","getUser","then","userData","console","log","currentAuthenticatedUser","currentSession","getIdToken","getJwtToken","e","username","signOut","federatedSignIn"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,OAAP,IAAkBC,IAAlB,EAAwBC,GAAxB,QAAmC,aAAnC;;AAEAF,OAAO,CAACG,SAAR,CAAkB;AAChBF,EAAAA,IAAI,EAAE;AACJG,IAAAA,MAAM,EAAE,gBADJ;AAEJC,IAAAA,UAAU,EAAE,0BAFR;AAGJC,IAAAA,mBAAmB,EAAE,4BAHjB;AAIJC,IAAAA,KAAK,EAAE;AACLC,MAAAA,MAAM,EAAE,kDADH;AAELC,MAAAA,KAAK,EAAE,CAAC,QAAD,CAFF;AAGLC,MAAAA,cAAc,EAAE,yBAHX;AAILC,MAAAA,eAAe,EAAE,yBAJZ;AAKLC,MAAAA,YAAY,EAAE;AALT;AAJH;AADU,CAAlB;AAeA,OAAO,MAAMC,KAAK,GAAG,MAAM;AAAA;;AACzB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAAa,IAAb,CAAhC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdI,IAAAA,GAAG,CAACc,MAAJ,CAAW,MAAX,EAAmB,QAAkC;AAAA,UAAjC;AAAEC,QAAAA,OAAO,EAAE;AAAEC,UAAAA,KAAF;AAASC,UAAAA;AAAT;AAAX,OAAiC;;AACnD,cAAQD,KAAR;AACE,aAAK,QAAL;AACA,aAAK,iBAAL;AACEE,UAAAA,OAAO,GAAGC,IAAV,CAAeC,QAAQ,IAAIP,OAAO,CAACO,QAAD,CAAlC;AACA;;AACF,aAAK,SAAL;AACEP,UAAAA,OAAO,CAAC,IAAD,CAAP;AACA;;AACF,aAAK,gBAAL;AACA,aAAK,yBAAL;AACEQ,UAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BL,IAA/B;AACA;AAXJ;AAaD,KAdD;AAgBAC,IAAAA,OAAO,GAAGC,IAAV,CAAeC,QAAQ,IAAIP,OAAO,CAACO,QAAD,CAAlC;AACD,GAlBQ,EAkBN,EAlBM,CAAT;;AAoBA,QAAMF,OAAO,GAAG,YAAY;AAC1B,QAAI;AACF,YAAME,QAAQ,GAAG,MAAMrB,IAAI,CAACwB,wBAAL,EAAvB,CADE,CAEF;;AACAxB,MAAAA,IAAI,CAACyB,cAAL,GAAsBL,IAAtB,CAA4BF,IAAD,IAAU;AACnCI,QAAAA,OAAO,CAACC,GAAR,CAAa,UAASL,IAAI,CAACQ,UAAL,GAAkBC,WAAlB,EAAgC,EAAtD;AACD,OAFD;AAGAL,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACA,aAAOA,QAAP;AACD,KARD,CAQE,OAAOO,CAAP,EAAU;AACV,aAAON,OAAO,CAACC,GAAR,CAAY,eAAZ,CAAP;AACD;AACF,GAZD;;AAcA,SAAOV,IAAI,gBACT;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAA,qDAAWA,IAAI,CAACgB,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE;AAAQ,MAAA,OAAO,EAAE,MAAM7B,IAAI,CAAC8B,OAAL,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAHF;AAAA;AAAA;AAAA;AAAA;AAAA,UADS,gBAOT;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAIE;AAAQ,MAAA,OAAO,EAAE,MAAM9B,IAAI,CAAC+B,eAAL,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJF;AAAA;AAAA;AAAA;AAAA;AAAA,UAPF;AAcD,CAnDM;;GAAMnB,K;;KAAAA,K","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport Amplify, { Auth, Hub } from 'aws-amplify';\r\n\r\nAmplify.configure({\r\n  Auth: {\r\n    region: 'ap-northeast-1',\r\n    userPoolId: 'ap-northeast-1_JFBzKeSlw',\r\n    userPoolWebClientId: '7kg7iakih0i1jlr614hp62djeq',\r\n    oauth: {\r\n      domain: 'maketfeasy.auth.ap-northeast-1.amazoncognito.com',\r\n      scope: ['openid'],\r\n      redirectSignIn: 'https://localhost:3000/',\r\n      redirectSignOut: 'https://localhost:3000/',\r\n      responseType: 'code'\r\n    }\r\n  }\r\n})\r\n\r\nexport const Login = () => {\r\n  const [user, setUser] = useState<any | null>(null);\r\n\r\n  useEffect(() => {\r\n    Hub.listen('auth', ({ payload: { event, data } }) => {\r\n      switch (event) {\r\n        case 'signIn':\r\n        case 'cognitoHostedUI':\r\n          getUser().then(userData => setUser(userData));\r\n          break;\r\n        case 'signOut':\r\n          setUser(null);\r\n          break;\r\n        case 'signIn_failure':\r\n        case 'cognitoHostedUI_failure':\r\n          console.log('Sign in failure', data);\r\n          break;\r\n      }\r\n    });\r\n\r\n    getUser().then(userData => setUser(userData));\r\n  }, []);\r\n\r\n  const getUser = async () => {\r\n    try {\r\n      const userData = await Auth.currentAuthenticatedUser();\r\n      // デバッグ用\r\n      Auth.currentSession().then((data) => {\r\n        console.log(`token: ${data.getIdToken().getJwtToken()}`);\r\n      });\r\n      console.log(userData);\r\n      return userData;\r\n    } catch (e) {\r\n      return console.log('Not signed in');\r\n    }\r\n  }\r\n\r\n  return user ? (\r\n    <div>\r\n      <p>サインイン済み</p>\r\n      <p>ユーザー名: {user.username}</p>\r\n      <button onClick={() => Auth.signOut()}>Sign Out</button>\r\n    </div>\r\n  ) : (\r\n    <div>\r\n      <p>\r\n        サインインする\r\n      </p>\r\n      <button onClick={() => Auth.federatedSignIn()}>Sign In</button>\r\n    </div>\r\n  );\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}